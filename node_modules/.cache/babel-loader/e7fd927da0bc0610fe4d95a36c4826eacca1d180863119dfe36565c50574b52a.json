{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nconst OPTIONS = {\n  enableHighAccuracy: true,\n  maximumAge: 0\n};\nconst useMyLocation = () => {\n  _s();\n  const [locationInfo, setLocationInfo] = useState({\n    lon: 0,\n    lat: 0,\n    accuracy: 0\n  });\n  const [error, setError] = useState({\n    message: \"\"\n  });\n  const [loading, setLoading] = useState(false);\n  const onSuccess = position => {\n    try {\n      const freshLon = position.coords.longitude.toFixed(7);\n      const freshLat = position.coords.latitude.toFixed(7);\n      const accuracy = position.coords.accuracy.toFixed(7);\n\n      //If the coordinates are changed update them\n      if (freshLon !== lon || freshLat !== lat) {\n        setLocationInfo({\n          lon: freshLon,\n          lat: freshLat,\n          accuracy\n        });\n      }\n    } catch (e) {\n      setError(e);\n    }\n  };\n  const onError = error => {\n    setError(error);\n  };\n  useEffect(() => {\n    const watcherId = navigator.geolocation.watchPosition(onSuccess, onError, OPTIONS);\n    return () => navigator.geolocation.clearWatch(watcherId);\n  }, []);\n  return {\n    locationInfo,\n    error,\n    loading\n  };\n};\n_s(useMyLocation, \"v4rG25MNz1AO0NV3+ZSOlN/T26w=\");\nexport default useMyLocation;","map":{"version":3,"names":["useEffect","useState","OPTIONS","enableHighAccuracy","maximumAge","useMyLocation","_s","locationInfo","setLocationInfo","lon","lat","accuracy","error","setError","message","loading","setLoading","onSuccess","position","freshLon","coords","longitude","toFixed","freshLat","latitude","e","onError","watcherId","navigator","geolocation","watchPosition","clearWatch"],"sources":["/Users/nikolayvalkov/work/my-location/src/hooks/useMyLocation.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\n\nconst OPTIONS = { enableHighAccuracy: true, maximumAge: 0 };\n\nconst useMyLocation = () => {\n\tconst [locationInfo, setLocationInfo] = useState({\n\t\tlon: 0,\n\t\tlat: 0,\n\t\taccuracy: 0,\n\t});\n\tconst [error, setError] = useState({ message: \"\" });\n\tconst [loading, setLoading] = useState(false);\n\n\tconst onSuccess = (position) => {\n\t\ttry {\n\t\t\tconst freshLon = position.coords.longitude.toFixed(7);\n\t\t\tconst freshLat = position.coords.latitude.toFixed(7);\n\t\t\tconst accuracy = position.coords.accuracy.toFixed(7);\n\n\t\t\t//If the coordinates are changed update them\n\t\t\tif (freshLon !== lon || freshLat !== lat) {\n\t\t\t\tsetLocationInfo({ lon: freshLon, lat: freshLat, accuracy });\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tsetError(e);\n\t\t}\n\t};\n\n\tconst onError = (error) => {\n\t\tsetError(error);\n\t};\n\n\tuseEffect(() => {\n\t\tconst watcherId = navigator.geolocation.watchPosition(\n\t\t\tonSuccess,\n\t\t\tonError,\n\t\t\tOPTIONS\n\t\t);\n\n\t\treturn () => navigator.geolocation.clearWatch(watcherId);\n\t}, []);\n\n\treturn {\n\t\tlocationInfo,\n\t\terror,\n\t\tloading,\n\t};\n};\n\nexport default useMyLocation;\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAE3C,MAAMC,OAAO,GAAG;EAAEC,kBAAkB,EAAE,IAAI;EAAEC,UAAU,EAAE;AAAE,CAAC;AAE3D,MAAMC,aAAa,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGP,QAAQ,CAAC;IAChDQ,GAAG,EAAE,CAAC;IACNC,GAAG,EAAE,CAAC;IACNC,QAAQ,EAAE;EACX,CAAC,CAAC;EACF,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,QAAQ,CAAC;IAAEa,OAAO,EAAE;EAAG,CAAC,CAAC;EACnD,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGf,QAAQ,CAAC,KAAK,CAAC;EAE7C,MAAMgB,SAAS,GAAIC,QAAQ,IAAK;IAC/B,IAAI;MACH,MAAMC,QAAQ,GAAGD,QAAQ,CAACE,MAAM,CAACC,SAAS,CAACC,OAAO,CAAC,CAAC,CAAC;MACrD,MAAMC,QAAQ,GAAGL,QAAQ,CAACE,MAAM,CAACI,QAAQ,CAACF,OAAO,CAAC,CAAC,CAAC;MACpD,MAAMX,QAAQ,GAAGO,QAAQ,CAACE,MAAM,CAACT,QAAQ,CAACW,OAAO,CAAC,CAAC,CAAC;;MAEpD;MACA,IAAIH,QAAQ,KAAKV,GAAG,IAAIc,QAAQ,KAAKb,GAAG,EAAE;QACzCF,eAAe,CAAC;UAAEC,GAAG,EAAEU,QAAQ;UAAET,GAAG,EAAEa,QAAQ;UAAEZ;QAAS,CAAC,CAAC;MAC5D;IACD,CAAC,CAAC,OAAOc,CAAC,EAAE;MACXZ,QAAQ,CAACY,CAAC,CAAC;IACZ;EACD,CAAC;EAED,MAAMC,OAAO,GAAId,KAAK,IAAK;IAC1BC,QAAQ,CAACD,KAAK,CAAC;EAChB,CAAC;EAEDZ,SAAS,CAAC,MAAM;IACf,MAAM2B,SAAS,GAAGC,SAAS,CAACC,WAAW,CAACC,aAAa,CACpDb,SAAS,EACTS,OAAO,EACPxB,OACD,CAAC;IAED,OAAO,MAAM0B,SAAS,CAACC,WAAW,CAACE,UAAU,CAACJ,SAAS,CAAC;EACzD,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IACNpB,YAAY;IACZK,KAAK;IACLG;EACD,CAAC;AACF,CAAC;AAACT,EAAA,CA3CID,aAAa;AA6CnB,eAAeA,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}